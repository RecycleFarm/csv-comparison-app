# CSV 비교 앱 - 제품 요구사항 문서 (PRD)

**문서 버전**: 1.0  
**최종 업데이트**: 2024년 12월 19일  
**작성자**: 개발팀

---

## 📋 제품 개요

### 목적
어제와 오늘의 CSV 파일을 비교하여 업데이트 횟수가 3회 이상 증가한 유저를 식별하는 웹 애플리케이션

### 타겟 사용자
- 데이터 분석가
- 사용자 활동 모니터링 담당자
- CSV 데이터 비교가 필요한 업무 담당자

---

## 🎯 핵심 기능

### 1. CSV 파일 업로드
- **어제 파일**: 기준이 되는 이전 날짜의 CSV 파일
- **오늘 파일**: 비교 대상인 현재 날짜의 CSV 파일
- **지원 형식**: CSV 파일만 지원

### 2. 데이터 비교 및 필터링
- **필터링 조건**: 
  - 어제 업데이트 횟수가 0, 1, 2회였던 유저 중 오늘 3회 이상인 유저
  - 어제 파일에 없고 오늘 파일에만 있으면서 3회 이상인 신규 유저
  - 삭제되지 않은 유저만 포함 (`deleted` 컬럼이 false인 유저)

### 3. 결과 데이터
- **유저 ID**: 고유 식별자
- **어제 횟수**: 어제 파일의 업데이트 횟수
- **오늘 횟수**: 오늘 파일의 업데이트 횟수
- **차이**: 오늘 횟수 - 어제 횟수
- **E164 전화번호**: 국제 전화번호 형식
- **국가**: E164 번호 기반 자동 판별
  - `+1`로 시작: 미국
  - `+82`로 시작: 한국
  - 기타: 기타 국가
- **삭제 여부**: 유저 삭제 상태

### 4. 통계 정보
- **전체 통계**: 어제/오늘 업데이트 횟수별 유저 수
- **국가별 통계**: 
  - 한국 통계
  - 미국 통계
  - 기타 국가 통계
- **통계 범위**: 0회부터 최대 횟수까지 모든 구간 포함

---

## 📊 데이터 구조

### 입력 CSV 파일 요구사항

#### 필수 컬럼
- **유저 ID**: `user_id`, `userId`, `user`, `id` 등 (동적 인식)
- **업데이트 횟수**: `사용횟수`, `update_count`, `count`, `usage`, `횟수` 등 (동적 인식)

#### 선택적 컬럼
- **E164 전화번호**: `e164`, `phone`, `전화` 등 (동적 인식)
- **삭제 여부**: `삭제`, `deleted`, `delete`, `remove` 등 (동적 인식)

#### 삭제 여부 값 형식
- **삭제됨**: `true`, `1`, `삭제`, `deleted`
- **삭제 안됨**: `false`, `0`, `활성`, `active` 또는 빈 값

---

## 🎨 사용자 인터페이스

### 메인 화면
- **헤더**: 파스텔 블루 배경의 앱 제목
- **파일 업로드 영역**: 어제/오늘 파일 각각 업로드
- **비교 버튼**: 파일 업로드 후 비교 실행
- **결과 영역**: 비교 결과 및 통계 표시

### 결과 표시
- **필터링된 유저 목록**: 최대 10개 미리보기
- **통계 정보**: 업데이트 횟수별 유저 수 (전체/국가별)
- **디버깅 정보**: 파싱된 데이터 샘플 및 컬럼 인식 상태

### 다운로드 기능
- **필터링된 유저 CSV**: 조건에 맞는 유저들의 상세 정보
- **통계 CSV**: 전체 및 국가별 통계 데이터

---

## 🔧 기술적 요구사항

### 프론트엔드
- **프레임워크**: React 18+ with TypeScript
- **CSV 파싱**: PapaParse 라이브러리
- **스타일링**: CSS3 (반응형 디자인)
- **배포**: GitHub Pages

### 브라우저 지원
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 성능 요구사항
- **파일 크기**: 최대 10MB CSV 파일 지원
- **응답 시간**: 5초 이내 비교 완료
- **메모리 사용량**: 클라이언트 사이드 처리

---

## 📈 성공 지표

### 기능적 지표
- ✅ CSV 파일 정확한 파싱 (99%+)
- ✅ 필터링 조건 정확한 적용
- ✅ 국가 정보 정확한 판별
- ✅ 통계 데이터 정확성

### 사용성 지표
- ✅ 직관적인 파일 업로드 인터페이스
- ✅ 명확한 결과 표시
- ✅ 원클릭 CSV 다운로드
- ✅ 반응형 디자인

---

## 🚀 향후 개선 계획

### 단기 (1-2개월)
- [ ] 더 많은 국가 코드 지원
- [ ] CSV 파일 형식 검증 강화
- [ ] 에러 처리 개선

### 중기 (3-6개월)
- [ ] 대용량 파일 처리 최적화
- [ ] 실시간 데이터 연동
- [ ] 사용자 인증 시스템

### 장기 (6개월+)
- [ ] API 서버 구축
- [ ] 데이터베이스 연동
- [ ] 고급 분석 기능

---

## 📞 지원 및 문의

- **이슈 리포트**: GitHub Issues
- **기술 문의**: 개발팀
- **사용법 문의**: 사용자 가이드 참조

---

**문서 승인**:  
- 제품 매니저: [승인 대기]  
- 기술 리드: [승인 대기]  
- 최종 승인일: [승인 대기]
